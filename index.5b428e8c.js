!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function e(t,e,h){return e&&i(t.prototype,e),h&&i(t,h),t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t){return h(t)}function s(t,i){return(s=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function l(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&s(t,i)}function r(t,i){return!i||"object"!=((e=i)&&e.constructor===Symbol?"symbol":typeof e)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i;var e}var n,c,a=function(){"use strict";function i(e,h,o){t(this,i),this.ctx=e,this.position=h,this.color=o}return e(i,[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}}]),i}(),d=function(i){"use strict";function h(){return t(this,h),r(this,o(h).apply(this,arguments))}return l(h,i),e(h,[{key:"setPosition",value:function(t){this.position=t}},{key:"setX",value:function(t){this.position.x=t}},{key:"setY",value:function(t){this.position.y=t}}]),h}(a),u=d,y=function(i){"use strict";function h(i,e){var s,l=e.x,n=e.y,c=e.deltaX,a=e.deltaY,d=e.color,u=e.radius;return t(this,h),(s=r(this,o(h).call(this,i,{x:l,y:n},d))).delta={x:c,y:a},s.radius=u,s}return l(h,i),e(h,[{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}},{key:"setDelta",value:function(t){this.delta=t}},{key:"deltaX",get:function(){return this.delta.x}},{key:"deltaY",get:function(){return this.delta.y}},{key:"invertDeltaX",value:function(){this.delta.x=-this.delta.x}},{key:"invertDeltaY",value:function(){this.delta.y=-this.delta.y}},{key:"move",value:function(){this.position={x:this.position.x+this.delta.x,y:this.position.y+this.delta.y}}}]),h}(u),w="#0095DD",x="16px Arial",g=480,f=function(i){"use strict";function h(i,e){var s,l=e.x,n=e.y,c=e.width,a=e.height,d=e.shift,u=e.color;return t(this,h),(s=r(this,o(h).call(this,i,{x:l,y:n},u))).size={width:c,height:a},s.shift=d,s}return l(h,i),e(h,[{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.rect(this.position.x,this.position.y,this.size.width,this.size.height),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}},{key:"moveLeft",value:function(){this.position.x-=this.shift,this.position.x<0&&(this.position.x=0)}},{key:"moveRight",value:function(){this.position.x+=this.shift,this.position.x+this.size.width>g&&(this.position.x=g-this.size.width)}},{key:"setShift",value:function(t){this.shift=t}},{key:"setSize",value:function(t){this.size=t}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}}]),h}(u);(c=n||(n={}))[c.UnBroken=0]="UnBroken",c[c.Broken=1]="Broken";var v,p,k=function(i){"use strict";function h(i,e){var s,l=e.x,c=e.y,a=e.width,d=e.height,u=e.color;return t(this,h),(s=r(this,o(h).call(this,i,{x:l,y:c},u))).size={width:a,height:d},s.status=n.UnBroken,s}return l(h,i),e(h,[{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.rect(this.position.x,this.position.y,this.size.width,this.size.height),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}},{key:"getStatus",value:function(){return this.status}},{key:"destroy",value:function(){this.status=n.Broken}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}}]),h}(a),b=function(){"use strict";function i(e,h){t(this,i),this.items=h.map((function(t){return new k(e,t)}))}return e(i,[{key:"draw",value:function(){for(var t=0;t<this.items.length;t++){var i=this.items[t];i.getStatus()!==n.Broken&&i.draw()}}},{key:"getItems",value:function(){return this.items}},{key:"allBroken",value:function(){return this.items.every((function(t){return t.getStatus()===n.Broken}))}}]),i}(),P=function(i){"use strict";function h(i,e,s,l,n,c){var a;return t(this,h),(a=r(this,o(h).call(this,i,e,s))).font=l,a.label=n,a.value=c,a}return l(h,i),e(h,[{key:"draw",value:function(){this.ctx.font=this.font,this.ctx.fillStyle=this.color,this.ctx.fillText("".concat(this.label,": ").concat(this.value),this.position.x,this.position.y)}},{key:"getValue",value:function(){return this.value}},{key:"increase",value:function(){this.value+=1}},{key:"descrease",value:function(){this.value-=1}}]),h}(a),S=function(t,i){var e=Math.abs(t.x-i.x-i.width/2),h=Math.abs(t.y-i.y-i.height/2);if(e>i.width/2+t.radius)return!1;if(h>i.height/2+t.radius)return!1;if(e<=i.width/2)return!0;if(h<=i.height/2)return!0;var o=e-i.width/2,s=h-i.height/2;return Math.pow(o,2)+Math.pow(s,2)<=Math.pow(t.radius,2)};(p=v||(v={}))[p.Pause=0]="Pause",p[p.Active=1]="Active",p[p.Win=2]="Win",p[p.GameOver=3]="GameOver";var m=[{ballSpeed:2,paddleSpeed:7,paddleSize:{width:75,height:15},bricks:[{x:30,y:30,color:w,width:75,height:20},{x:30,y:60,color:w,width:75,height:20},{x:30,y:90,color:w,width:75,height:20},{x:115,y:30,color:w,width:75,height:20},{x:115,y:60,color:w,width:75,height:20},{x:115,y:90,color:w,width:75,height:20},{x:200,y:30,color:w,width:75,height:20},{x:200,y:60,color:w,width:75,height:20},{x:200,y:90,color:w,width:75,height:20},{x:285,y:30,color:w,width:75,height:20},{x:285,y:60,color:w,width:75,height:20},{x:285,y:90,color:w,width:75,height:20},{x:370,y:30,color:w,width:75,height:20},{x:370,y:60,color:w,width:75,height:20},{x:370,y:90,color:w,width:75,height:20}]},{ballSpeed:2.2,paddleSpeed:7.2,paddleSize:{width:65,height:15},bricks:[{x:30,y:30,color:w,width:80,height:20},{x:120,y:30,color:w,width:20,height:20},{x:150,y:30,color:w,width:80,height:20},{x:240,y:30,color:w,width:20,height:20},{x:270,y:30,color:w,width:80,height:20},{x:360,y:30,color:w,width:20,height:20},{x:390,y:30,color:w,width:70,height:20},{x:30,y:60,color:w,width:20,height:20},{x:60,y:60,color:w,width:80,height:20},{x:150,y:60,color:w,width:20,height:20},{x:180,y:60,color:w,width:80,height:20},{x:270,y:60,color:w,width:20,height:20},{x:300,y:60,color:w,width:80,height:20},{x:390,y:60,color:w,width:20,height:20},{x:420,y:60,color:w,width:40,height:20},{x:30,y:90,color:w,width:80,height:20},{x:120,y:90,color:w,width:20,height:20},{x:150,y:90,color:w,width:80,height:20},{x:240,y:90,color:w,width:20,height:20},{x:270,y:90,color:w,width:80,height:20},{x:360,y:90,color:w,width:20,height:20},{x:390,y:90,color:w,width:70,height:20}]},{ballSpeed:2.4,paddleSpeed:7.4,paddleSize:{width:55,height:15},bricks:[{x:215,y:30,color:w,width:50,height:20},{x:200,y:60,color:w,width:80,height:20},{x:180,y:90,color:w,width:120,height:20},{x:200,y:120,color:w,width:80,height:20},{x:215,y:150,color:w,width:50,height:20},{x:50,y:65,color:w,width:50,height:20},{x:110,y:85,color:w,width:20,height:30},{x:50,y:115,color:w,width:50,height:20},{x:20,y:85,color:w,width:20,height:30},{x:380,y:65,color:w,width:50,height:20},{x:350,y:85,color:w,width:20,height:30},{x:380,y:115,color:w,width:50,height:20},{x:440,y:85,color:w,width:20,height:30}]},{ballSpeed:2.6,paddleSpeed:7.6,paddleSize:{width:45,height:15},bricks:[{x:30,y:30,color:w,width:75,height:20},{x:115,y:30,color:w,width:75,height:20},{x:200,y:30,color:w,width:75,height:20},{x:285,y:30,color:w,width:75,height:20},{x:370,y:30,color:w,width:75,height:20},{x:30,y:60,color:w,width:47,height:20},{x:92,y:60,color:w,width:47,height:20},{x:154,y:60,color:w,width:47,height:20},{x:216,y:60,color:w,width:47,height:20},{x:278,y:60,color:w,width:47,height:20},{x:340,y:60,color:w,width:47,height:20},{x:402,y:60,color:w,width:42,height:20},{x:30,y:90,color:w,width:20,height:20},{x:60,y:90,color:w,width:20,height:20},{x:90,y:90,color:w,width:20,height:20},{x:120,y:90,color:w,width:20,height:20},{x:150,y:90,color:w,width:20,height:20},{x:180,y:90,color:w,width:20,height:20},{x:210,y:90,color:w,width:20,height:20},{x:240,y:90,color:w,width:20,height:20},{x:270,y:90,color:w,width:20,height:20},{x:300,y:90,color:w,width:20,height:20},{x:330,y:90,color:w,width:20,height:20},{x:360,y:90,color:w,width:20,height:20},{x:390,y:90,color:w,width:20,height:20},{x:420,y:90,color:w,width:20,height:20}]},{ballSpeed:2.8,paddleSpeed:8,paddleSize:{width:35,height:15},bricks:[{x:30,y:30,color:w,width:20,height:20},{x:60,y:30,color:w,width:20,height:20},{x:90,y:30,color:w,width:20,height:20},{x:120,y:30,color:w,width:20,height:20},{x:150,y:30,color:w,width:20,height:20},{x:180,y:30,color:w,width:20,height:20},{x:210,y:30,color:w,width:20,height:20},{x:240,y:30,color:w,width:20,height:20},{x:270,y:30,color:w,width:20,height:20},{x:300,y:30,color:w,width:20,height:20},{x:330,y:30,color:w,width:20,height:20},{x:360,y:30,color:w,width:20,height:20},{x:390,y:30,color:w,width:20,height:20},{x:420,y:30,color:w,width:20,height:20},{x:30,y:60,color:w,width:50,height:20},{x:90,y:60,color:w,width:50,height:20},{x:150,y:60,color:w,width:50,height:20},{x:210,y:60,color:w,width:50,height:20},{x:270,y:60,color:w,width:50,height:20},{x:330,y:60,color:w,width:50,height:20},{x:390,y:60,color:w,width:50,height:20},{x:30,y:90,color:w,width:30,height:20},{x:75,y:90,color:w,width:30,height:20},{x:120,y:90,color:w,width:30,height:20},{x:160,y:90,color:w,width:30,height:20},{x:200,y:90,color:w,width:30,height:20},{x:240,y:90,color:w,width:30,height:20},{x:280,y:90,color:w,width:30,height:20},{x:320,y:90,color:w,width:30,height:20},{x:360,y:90,color:w,width:30,height:20},{x:400,y:90,color:w,width:40,height:20}]}],O=new(function(){"use strict";function i(e,h,o){t(this,i),this.ctx=e,this.scaleIndex=h,this.levels=o,this.scaleCanvas(),this.score=new P(e,{x:8,y:20},w,x,"Score",0),this.level=new P(e,{x:this.width/2-25,y:20},w,x,"Level",1),this.lives=new P(e,{x:this.width-65,y:20},w,x,"Lives",3),this.ball=new y(e,{x:this.width/2,y:this.height-30,deltaX:this.currentLevelOptions.ballSpeed,deltaY:-this.currentLevelOptions.ballSpeed,color:w,radius:10}),this.paddle=new f(e,{x:(this.width-this.currentLevelOptions.paddleSize.width)/2,y:this.height-this.currentLevelOptions.paddleSize.height,width:this.currentLevelOptions.paddleSize.width,height:this.currentLevelOptions.paddleSize.height,shift:this.currentLevelOptions.paddleSpeed,color:w}),this.bricks=new b(e,this.currentLevelOptions.bricks),this.status=v.Pause,this.isRightArrowPressed=!1,this.isLeftArrowPressed=!1,this.activateControls()}return e(i,[{key:"scaleCanvas",value:function(){this.ctx.canvas.width=g*this.scaleIndex,this.ctx.canvas.height=320*this.scaleIndex,this.ctx.canvas.setAttribute("style","width: ".concat(g,"px; height: ").concat(320,";")),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.scaleIndex,this.scaleIndex)}},{key:"currentLevelOptions",get:function(){return this.levels[this.level.getValue()-1]}},{key:"width",get:function(){return this.ctx.canvas.width/this.scaleIndex}},{key:"height",get:function(){return this.ctx.canvas.height/this.scaleIndex}},{key:"activateControls",value:function(){var t=this,i=this;document.addEventListener("keydown",(function(i){39===i.keyCode?(t.isRightArrowPressed=!0,t.status===v.Pause&&t.continue()):37===i.keyCode?(t.isLeftArrowPressed=!0,t.status===v.Pause&&t.continue()):32===i.keyCode&&(t.status===v.Pause?t.continue():t.status===v.Active&&t.pause())})),document.addEventListener("keyup",(function(t){39===t.keyCode?i.isRightArrowPressed=!1:37===t.keyCode&&(i.isLeftArrowPressed=!1)}))}},{key:"pause",value:function(){this.status=v.Pause}},{key:"continue",value:function(){this.status=v.Active}},{key:"play",value:function(){this.cleanCanvas(),this.draw(),this.status!==v.Pause&&(this.detectBallCollisionWithBricks(),this.detectBallCollistionWithPaddleAndBorders(),this.moveElements())}},{key:"cleanCanvas",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"draw",value:function(){this.bricks.draw(),this.ball.draw(),this.paddle.draw(),this.score.draw(),this.level.draw(),this.lives.draw()}},{key:"detectBallCollisionWithBricks",value:function(){for(var t=!1,i=this.bricks.getItems(),e=0;e<i.length;e++){var h=i[e];h.getStatus()!==n.Broken&&(S(this.ball,h)&&(t=!0,h.destroy(),this.score.increase()))}t&&this.ball.invertDeltaY(),this.bricks.allBroken()&&this.upLevel()}},{key:"upLevel",value:function(){this.level.getValue()===this.levels.length?this.status=v.Win:(this.level.increase(),this.bricks=new b(this.ctx,this.currentLevelOptions.bricks),this.pause(),this.setBallToInitialPosition(),this.paddle.setSize(this.currentLevelOptions.paddleSize),this.paddle.setShift(this.currentLevelOptions.paddleSpeed),this.setPaddleToInitialPosition())}},{key:"detectBallCollistionWithPaddleAndBorders",value:function(){(this.ballReachedLeft()||this.ballReachedRight())&&this.ball.invertDeltaX(),(this.ballReachedTop()||this.ballReachedPaddle())&&this.ball.invertDeltaY(),this.ballReachedBottom()&&this.attemptIsOver()}},{key:"ballReachedLeft",value:function(){return this.ball.x+this.ball.deltaX<this.ball.radius}},{key:"ballReachedRight",value:function(){return this.ball.x+this.ball.deltaX>this.width-this.ball.radius}},{key:"ballReachedTop",value:function(){return this.ball.y+this.ball.deltaY<this.ball.radius}},{key:"ballReachedBottom",value:function(){return this.ball.y+this.ball.deltaY>this.height-this.ball.radius}},{key:"ballReachedPaddle",value:function(){return S(this.ball,this.paddle)}},{key:"attemptIsOver",value:function(){this.lives.descrease(),this.lives.getValue()?(this.pause(),this.setBallToInitialPosition(),this.setPaddleToInitialPosition()):this.status=v.GameOver}},{key:"setBallToInitialPosition",value:function(){this.ball.setPosition({x:this.width/2,y:this.height-30}),this.ball.setDelta({x:this.currentLevelOptions.ballSpeed,y:-this.currentLevelOptions.ballSpeed})}},{key:"setPaddleToInitialPosition",value:function(){this.paddle.setX((this.width-this.paddle.width)/2)}},{key:"moveElements",value:function(){this.isRightArrowPressed&&this.paddle.moveRight(),this.isLeftArrowPressed&&this.paddle.moveLeft(),this.ball.move()}}]),i}())(document.querySelector("#gameCanvas").getContext("2d"),window.devicePixelRatio,m),L=function(){return O.play(),O.status===v.Win?(alert("YOU WIN, CONGRATULATIONS!"),void document.location.reload()):O.status===v.GameOver?(alert("GAME OVER"),void document.location.reload()):void requestAnimationFrame(L)};L()}();
//# sourceMappingURL=index.5b428e8c.js.map
