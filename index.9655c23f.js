var t=class{get x(){return this.position.x}get y(){return this.position.y}constructor(t,i,h){this.ctx=t,this.position=i,this.color=h}};var i=class extends t{setPosition(t){this.position=t}setX(t){this.position.x=t}setY(t){this.position.y=t}};var h=class extends i{draw(){this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}setDelta(t){this.delta=t}get deltaX(){return this.delta.x}get deltaY(){return this.delta.y}invertDeltaX(){this.delta.x=-this.delta.x}invertDeltaY(){this.delta.y=-this.delta.y}move(){this.position={x:this.position.x+this.delta.x,y:this.position.y+this.delta.y}}constructor(t,{x:i,y:h,deltaX:e,deltaY:s,color:o,radius:l}){super(t,{x:i,y:h},o),this.delta={x:e,y:s},this.radius=l}};var e,s,o=class extends i{draw(){this.ctx.beginPath(),this.ctx.rect(this.position.x,this.position.y,this.size.width,this.size.height),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}moveLeft(){this.position.x-=this.shift,this.position.x<0&&(this.position.x=0)}moveRight(){this.position.x+=this.shift,this.position.x+this.size.width>480&&(this.position.x=480-this.size.width)}setShift(t){this.shift=t}setSize(t){this.size=t}get width(){return this.size.width}get height(){return this.size.height}constructor(t,{x:i,y:h,width:e,height:s,shift:o,color:l}){super(t,{x:i,y:h},l),this.size={width:e,height:s},this.shift=o}};(s=e||(e={}))[s.UnBroken=0]="UnBroken",s[s.Broken=1]="Broken";var l=class extends t{draw(){this.ctx.beginPath(),this.ctx.rect(this.position.x,this.position.y,this.size.width,this.size.height),this.ctx.fillStyle=this.color,this.ctx.fill(),this.ctx.closePath()}getStatus(){return this.status}destroy(){this.status=e.Broken}get width(){return this.size.width}get height(){return this.size.height}constructor(t,{x:i,y:h,width:s,height:o,color:l}){super(t,{x:i,y:h},l),this.size={width:s,height:o},this.status=e.UnBroken}};var r=class{draw(){for(let t=0;t<this.items.length;t++){const i=this.items[t];i.getStatus()!==e.Broken&&i.draw()}}getItems(){return this.items}allBroken(){return this.items.every((t=>t.getStatus()===e.Broken))}constructor(t,i){this.items=i.map((i=>new l(t,i)))}};var d=class extends t{draw(){this.ctx.font=this.font,this.ctx.fillStyle=this.color,this.ctx.fillText(`${this.label}: ${this.value}`,this.position.x,this.position.y)}getValue(){return this.value}increase(){this.value+=1}descrease(){this.value-=1}constructor(t,i,h,e,s,o){super(t,i,h),this.font=e,this.label=s,this.value=o}};var a,c,D=(t,i)=>{const h=Math.abs(t.x-i.x-i.width/2),e=Math.abs(t.y-i.y-i.height/2);if(h>i.width/2+t.radius)return!1;if(e>i.height/2+t.radius)return!1;if(h<=i.width/2)return!0;if(e<=i.height/2)return!0;return(h-i.width/2)**2+(e-i.height/2)**2<=t.radius**2};(c=a||(a={}))[c.Pause=0]="Pause",c[c.Active=1]="Active",c[c.Win=2]="Win",c[c.GameOver=3]="GameOver";var n=[{ballSpeed:2,paddleSpeed:7,paddleSize:{width:75,height:15},bricks:[{x:30,y:30,color:"#0095DD",width:75,height:20},{x:30,y:60,color:"#0095DD",width:75,height:20},{x:30,y:90,color:"#0095DD",width:75,height:20},{x:115,y:30,color:"#0095DD",width:75,height:20},{x:115,y:60,color:"#0095DD",width:75,height:20},{x:115,y:90,color:"#0095DD",width:75,height:20},{x:200,y:30,color:"#0095DD",width:75,height:20},{x:200,y:60,color:"#0095DD",width:75,height:20},{x:200,y:90,color:"#0095DD",width:75,height:20},{x:285,y:30,color:"#0095DD",width:75,height:20},{x:285,y:60,color:"#0095DD",width:75,height:20},{x:285,y:90,color:"#0095DD",width:75,height:20},{x:370,y:30,color:"#0095DD",width:75,height:20},{x:370,y:60,color:"#0095DD",width:75,height:20},{x:370,y:90,color:"#0095DD",width:75,height:20}]},{ballSpeed:2.2,paddleSpeed:7.2,paddleSize:{width:65,height:15},bricks:[{x:30,y:30,color:"#0095DD",width:80,height:20},{x:120,y:30,color:"#0095DD",width:20,height:20},{x:150,y:30,color:"#0095DD",width:80,height:20},{x:240,y:30,color:"#0095DD",width:20,height:20},{x:270,y:30,color:"#0095DD",width:80,height:20},{x:360,y:30,color:"#0095DD",width:20,height:20},{x:390,y:30,color:"#0095DD",width:70,height:20},{x:30,y:60,color:"#0095DD",width:20,height:20},{x:60,y:60,color:"#0095DD",width:80,height:20},{x:150,y:60,color:"#0095DD",width:20,height:20},{x:180,y:60,color:"#0095DD",width:80,height:20},{x:270,y:60,color:"#0095DD",width:20,height:20},{x:300,y:60,color:"#0095DD",width:80,height:20},{x:390,y:60,color:"#0095DD",width:20,height:20},{x:420,y:60,color:"#0095DD",width:40,height:20},{x:30,y:90,color:"#0095DD",width:80,height:20},{x:120,y:90,color:"#0095DD",width:20,height:20},{x:150,y:90,color:"#0095DD",width:80,height:20},{x:240,y:90,color:"#0095DD",width:20,height:20},{x:270,y:90,color:"#0095DD",width:80,height:20},{x:360,y:90,color:"#0095DD",width:20,height:20},{x:390,y:90,color:"#0095DD",width:70,height:20}]},{ballSpeed:2.4,paddleSpeed:7.4,paddleSize:{width:55,height:15},bricks:[{x:215,y:30,color:"#0095DD",width:50,height:20},{x:200,y:60,color:"#0095DD",width:80,height:20},{x:180,y:90,color:"#0095DD",width:120,height:20},{x:200,y:120,color:"#0095DD",width:80,height:20},{x:215,y:150,color:"#0095DD",width:50,height:20},{x:50,y:65,color:"#0095DD",width:50,height:20},{x:110,y:85,color:"#0095DD",width:20,height:30},{x:50,y:115,color:"#0095DD",width:50,height:20},{x:20,y:85,color:"#0095DD",width:20,height:30},{x:380,y:65,color:"#0095DD",width:50,height:20},{x:350,y:85,color:"#0095DD",width:20,height:30},{x:380,y:115,color:"#0095DD",width:50,height:20},{x:440,y:85,color:"#0095DD",width:20,height:30}]},{ballSpeed:2.6,paddleSpeed:7.6,paddleSize:{width:45,height:15},bricks:[{x:30,y:30,color:"#0095DD",width:75,height:20},{x:115,y:30,color:"#0095DD",width:75,height:20},{x:200,y:30,color:"#0095DD",width:75,height:20},{x:285,y:30,color:"#0095DD",width:75,height:20},{x:370,y:30,color:"#0095DD",width:75,height:20},{x:30,y:60,color:"#0095DD",width:47,height:20},{x:92,y:60,color:"#0095DD",width:47,height:20},{x:154,y:60,color:"#0095DD",width:47,height:20},{x:216,y:60,color:"#0095DD",width:47,height:20},{x:278,y:60,color:"#0095DD",width:47,height:20},{x:340,y:60,color:"#0095DD",width:47,height:20},{x:402,y:60,color:"#0095DD",width:42,height:20},{x:30,y:90,color:"#0095DD",width:20,height:20},{x:60,y:90,color:"#0095DD",width:20,height:20},{x:90,y:90,color:"#0095DD",width:20,height:20},{x:120,y:90,color:"#0095DD",width:20,height:20},{x:150,y:90,color:"#0095DD",width:20,height:20},{x:180,y:90,color:"#0095DD",width:20,height:20},{x:210,y:90,color:"#0095DD",width:20,height:20},{x:240,y:90,color:"#0095DD",width:20,height:20},{x:270,y:90,color:"#0095DD",width:20,height:20},{x:300,y:90,color:"#0095DD",width:20,height:20},{x:330,y:90,color:"#0095DD",width:20,height:20},{x:360,y:90,color:"#0095DD",width:20,height:20},{x:390,y:90,color:"#0095DD",width:20,height:20},{x:420,y:90,color:"#0095DD",width:20,height:20}]},{ballSpeed:2.8,paddleSpeed:8,paddleSize:{width:35,height:15},bricks:[{x:30,y:30,color:"#0095DD",width:20,height:20},{x:60,y:30,color:"#0095DD",width:20,height:20},{x:90,y:30,color:"#0095DD",width:20,height:20},{x:120,y:30,color:"#0095DD",width:20,height:20},{x:150,y:30,color:"#0095DD",width:20,height:20},{x:180,y:30,color:"#0095DD",width:20,height:20},{x:210,y:30,color:"#0095DD",width:20,height:20},{x:240,y:30,color:"#0095DD",width:20,height:20},{x:270,y:30,color:"#0095DD",width:20,height:20},{x:300,y:30,color:"#0095DD",width:20,height:20},{x:330,y:30,color:"#0095DD",width:20,height:20},{x:360,y:30,color:"#0095DD",width:20,height:20},{x:390,y:30,color:"#0095DD",width:20,height:20},{x:420,y:30,color:"#0095DD",width:20,height:20},{x:30,y:60,color:"#0095DD",width:50,height:20},{x:90,y:60,color:"#0095DD",width:50,height:20},{x:150,y:60,color:"#0095DD",width:50,height:20},{x:210,y:60,color:"#0095DD",width:50,height:20},{x:270,y:60,color:"#0095DD",width:50,height:20},{x:330,y:60,color:"#0095DD",width:50,height:20},{x:390,y:60,color:"#0095DD",width:50,height:20},{x:30,y:90,color:"#0095DD",width:30,height:20},{x:75,y:90,color:"#0095DD",width:30,height:20},{x:120,y:90,color:"#0095DD",width:30,height:20},{x:160,y:90,color:"#0095DD",width:30,height:20},{x:200,y:90,color:"#0095DD",width:30,height:20},{x:240,y:90,color:"#0095DD",width:30,height:20},{x:280,y:90,color:"#0095DD",width:30,height:20},{x:320,y:90,color:"#0095DD",width:30,height:20},{x:360,y:90,color:"#0095DD",width:30,height:20},{x:400,y:90,color:"#0095DD",width:40,height:20}]}];const x=new class{scaleCanvas(){this.ctx.canvas.width=480*this.scaleIndex,this.ctx.canvas.height=320*this.scaleIndex,this.ctx.canvas.setAttribute("style","width: 480px; height: 320;"),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.scaleIndex,this.scaleIndex)}get currentLevelOptions(){return this.levels[this.level.getValue()-1]}get width(){return this.ctx.canvas.width/this.scaleIndex}get height(){return this.ctx.canvas.height/this.scaleIndex}activateControls(){document.addEventListener("keydown",(t=>{39===t.keyCode?(this.isRightArrowPressed=!0,this.status===a.Pause&&this.continue()):37===t.keyCode?(this.isLeftArrowPressed=!0,this.status===a.Pause&&this.continue()):32===t.keyCode&&(this.status===a.Pause?this.continue():this.status===a.Active&&this.pause())})),document.addEventListener("keyup",(t=>{39===t.keyCode?this.isRightArrowPressed=!1:37===t.keyCode&&(this.isLeftArrowPressed=!1)}))}pause(){this.status=a.Pause}continue(){this.status=a.Active}play(){this.cleanCanvas(),this.draw(),this.status!==a.Pause&&(this.detectBallCollisionWithBricks(),this.detectBallCollistionWithPaddleAndBorders(),this.moveElements())}cleanCanvas(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}draw(){this.bricks.draw(),this.ball.draw(),this.paddle.draw(),this.score.draw(),this.level.draw(),this.lives.draw()}detectBallCollisionWithBricks(){let t=!1;const i=this.bricks.getItems();for(let h=0;h<i.length;h++){const s=i[h];s.getStatus()!==e.Broken&&(D(this.ball,s)&&(t=!0,s.destroy(),this.score.increase()))}t&&this.ball.invertDeltaY(),this.bricks.allBroken()&&this.upLevel()}upLevel(){this.level.getValue()===this.levels.length?this.status=a.Win:(this.level.increase(),this.bricks=new r(this.ctx,this.currentLevelOptions.bricks),this.pause(),this.setBallToInitialPosition(),this.paddle.setSize(this.currentLevelOptions.paddleSize),this.paddle.setShift(this.currentLevelOptions.paddleSpeed),this.setPaddleToInitialPosition())}detectBallCollistionWithPaddleAndBorders(){(this.ballReachedLeft()||this.ballReachedRight())&&this.ball.invertDeltaX(),(this.ballReachedTop()||this.ballReachedPaddle())&&this.ball.invertDeltaY(),this.ballReachedBottom()&&this.attemptIsOver()}ballReachedLeft(){return this.ball.x+this.ball.deltaX<this.ball.radius}ballReachedRight(){return this.ball.x+this.ball.deltaX>this.width-this.ball.radius}ballReachedTop(){return this.ball.y+this.ball.deltaY<this.ball.radius}ballReachedBottom(){return this.ball.y+this.ball.deltaY>this.height-this.ball.radius}ballReachedPaddle(){return D(this.ball,this.paddle)}attemptIsOver(){this.lives.descrease(),this.lives.getValue()?(this.pause(),this.setBallToInitialPosition(),this.setPaddleToInitialPosition()):this.status=a.GameOver}setBallToInitialPosition(){this.ball.setPosition({x:this.width/2,y:this.height-30}),this.ball.setDelta({x:this.currentLevelOptions.ballSpeed,y:-this.currentLevelOptions.ballSpeed})}setPaddleToInitialPosition(){this.paddle.setX((this.width-this.paddle.width)/2)}moveElements(){this.isRightArrowPressed&&this.paddle.moveRight(),this.isLeftArrowPressed&&this.paddle.moveLeft(),this.ball.move()}constructor(t,i,e){this.ctx=t,this.scaleIndex=i,this.levels=e,this.scaleCanvas(),this.score=new d(t,{x:8,y:20},"#0095DD","16px Arial","Score",0),this.level=new d(t,{x:this.width/2-25,y:20},"#0095DD","16px Arial","Level",1),this.lives=new d(t,{x:this.width-65,y:20},"#0095DD","16px Arial","Lives",3),this.ball=new h(t,{x:this.width/2,y:this.height-30,deltaX:this.currentLevelOptions.ballSpeed,deltaY:-this.currentLevelOptions.ballSpeed,color:"#0095DD",radius:10}),this.paddle=new o(t,{x:(this.width-this.currentLevelOptions.paddleSize.width)/2,y:this.height-this.currentLevelOptions.paddleSize.height,width:this.currentLevelOptions.paddleSize.width,height:this.currentLevelOptions.paddleSize.height,shift:this.currentLevelOptions.paddleSpeed,color:"#0095DD"}),this.bricks=new r(t,this.currentLevelOptions.bricks),this.status=a.Pause,this.isRightArrowPressed=!1,this.isLeftArrowPressed=!1,this.activateControls()}}(document.querySelector("#gameCanvas").getContext("2d"),window.devicePixelRatio,n),w=()=>(x.play(),x.status===a.Win?(alert("YOU WIN, CONGRATULATIONS!"),void document.location.reload()):x.status===a.GameOver?(alert("GAME OVER"),void document.location.reload()):void requestAnimationFrame(w));w();
//# sourceMappingURL=index.9655c23f.js.map
